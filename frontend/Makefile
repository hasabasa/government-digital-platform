# Makefile –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≥–æ—Å—Å–ª—É–∂–∞—â–∏—Ö

.PHONY: help install dev build preview test lint clean docker-build docker-run

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
help:
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:"
	@echo "  install      - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"
	@echo "  dev          - –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä"
	@echo "  build        - –°–æ–±—Ä–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞"
	@echo "  preview      - –ü—Ä–æ—Å–º–æ—Ç—Ä prod —Å–±–æ—Ä–∫–∏"
	@echo "  test         - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã"
	@echo "  test-watch   - –¢–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ"
	@echo "  lint         - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥"
	@echo "  lint-fix     - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞"
	@echo "  type-check   - –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript"
	@echo "  analyze      - –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞"
	@echo "  clean        - –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã"
	@echo "  docker-build - –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑"
	@echo "  docker-run   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ Docker"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
install:
	@echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞..."
	cd frontend-shell && npm install

# –ó–∞–ø—É—Å–∫ development —Å–µ—Ä–≤–µ—Ä–∞
dev:
	@echo "–ó–∞–ø—É—Å–∫ development —Å–µ—Ä–≤–µ—Ä–∞..."
	cd frontend-shell && npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
build:
	@echo "–°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞..."
	cd frontend-shell && npm run build

# –ü—Ä–æ—Å–º–æ—Ç—Ä production —Å–±–æ—Ä–∫–∏
preview:
	@echo "–ü—Ä–æ—Å–º–æ—Ç—Ä production —Å–±–æ—Ä–∫–∏..."
	cd frontend-shell && npm run preview

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
test:
	@echo "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
	cd frontend-shell && npm run test

# –¢–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ
test-watch:
	@echo "–¢–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ..."
	cd frontend-shell && npm run test:watch

# –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
test-coverage:
	@echo "–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏..."
	cd frontend-shell && npm run test:coverage

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
lint:
	@echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞..."
	cd frontend-shell && npm run lint

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
lint-fix:
	@echo "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞..."
	cd frontend-shell && npm run lint:fix

# –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript
type-check:
	@echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript..."
	cd frontend-shell && npm run type-check

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
analyze:
	@echo "–ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞..."
	cd frontend-shell && npm run analyze

# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
clean:
	@echo "–û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤..."
	cd frontend-shell && rm -rf dist node_modules/.cache .turbo

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤–∫–ª—é—á–∞—è node_modules
clean-all: clean
	@echo "–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞..."
	cd frontend-shell && rm -rf node_modules

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
update:
	@echo "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
	cd frontend-shell && npm update

# –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
audit:
	@echo "–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏..."
	cd frontend-shell && npm audit

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
audit-fix:
	@echo "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π..."
	cd frontend-shell && npm audit fix

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
format:
	@echo "–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞..."
	cd frontend-shell && npx prettier --write .

# Docker –∫–æ–º–∞–Ω–¥—ã
docker-build:
	@echo "–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞..."
	cd frontend-shell && docker build -t frontend-shell .

docker-run:
	@echo "–ó–∞–ø—É—Å–∫ –≤ Docker..."
	docker run -p 3000:80 frontend-shell

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
install-dep:
	@read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞: " package; \
	cd frontend-shell && npm install $$package

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
install-dev-dep:
	@read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ dev –ø–∞–∫–µ—Ç–∞: " package; \
	cd frontend-shell && npm install -D $$package

# –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
remove-dep:
	@read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: " package; \
	cd frontend-shell && npm uninstall $$package

# –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ
info:
	@echo "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:"
	@echo "- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: React 18 + TypeScript + Vite"
	@echo "- –°—Ç–∏–ª–∏: TailwindCSS"
	@echo "- State: Zustand + React Query"
	@echo "- PWA: Vite PWA Plugin"
	@echo "- Dev —Å–µ—Ä–≤–µ—Ä: http://localhost:3000"

# Quick start
quickstart: install dev
	@echo "üé® –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω!"
	@echo "- –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000"
	@echo "- –¢–µ—Å—Ç–æ–≤—ã–π –≤—Ö–æ–¥: admin@gov.kz / test-signature-123"

# –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
full-setup: clean-all install build
	@echo "‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Å–æ–±—Ä–∞–Ω!"
